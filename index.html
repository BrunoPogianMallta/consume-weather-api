<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API-TEMPO</title>
</head>
<body>
    <span id="city"></span>
    <span id="temperature"></span>

    <script>
// variaveis para consumir a api

        const CITY = document.getElementById('city')
        const TEMPERATURE = document.getElementById('temperature')
        const URL_MAIN = 'https://api.openweathermap.org/data/2.5/weather'
        const API_KEY = '29bddccdeb9d671452094f6839c4834a'
        const UNITS = 'metric'


        // acesso a localização
navigator.geolocation.getCurrentPosition(loadingUrl)

// -23.544805251508127, -46.79590591746176
//-23.43485415147753, -51.93783621598265
// -7.223744906160376, -39.305040281074945

function loadingUrl(pos){
    let lat =  pos.coords.latitude;
    let long = pos.coords.longitude;
    let url = `${URL_MAIN}?lat=${lat}&lon=${long}&units=${UNITS}&appid=${API_KEY}`
    fetchApi(url)
}

async function fetchApi(url){
    let response = await  fetch(url);
    let {main, name} = await response.json();
    let temperature = main.temp
    CITY.innerText = `${name}`;
    TEMPERATURE.innerText = `${temperature} ºC`;

}

    </script>
</body>


</html>